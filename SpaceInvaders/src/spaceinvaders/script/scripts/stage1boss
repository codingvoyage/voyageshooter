-- This is the boss of Stage one. I like Touhou's bullet hell and all, but I am
-- also fond of the wanton. recklessness of FPSs. This boss will be reckless.
    -- Sweep in from the side of the screen
    -- First of all, the boss is spawned at (-200, -200)
    -- We want it to move to the center of the screen, close to the top


var state 0

-- Create the auxiliary threads
newthread 39 "weaponthread"
newthread 40 "movementthread"

-- Give the program a moment to register the new threads...
wait 20

-- Pass the auxiliary threads the ID of this thread
getThreadID ourID
callthreadfunction "weaponthread" [giveMainHandle] ourID
callthreadfunction "movementthread" [giveMainHandle] ourID

-- Execute the initial entrance sequence.
var complete false
while complete != true
    wait 50
    callthreadfunction "movementthread" [isInitialEntranceDone] --> complete
wend

print "DONE WITH ENTRANCE SEQUENCE"

-- Start state 1 now.
-- The battle begins.
setvar state 1


-- Kill time
label [asdfasdf]
    wait 800
goto [asdfasdf]


endthread


function [getCurrentState]
    print "LOLOLOL"
return state

label [donothing]

    wait 250

    faceplayer

    for count = 0 and count < 5
        callscriptfunction 25 [shoot]
        wait 50
    next count + 1 --> count

goto [donothing]
